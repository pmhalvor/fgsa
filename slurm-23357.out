Starting job 23357 on gpu-2 at Fri Feb 11 10:29:32 CET 2022

============================= test session starts ==============================
platform linux -- Python 3.8.6, pytest-6.1.1, py-1.9.0, pluggy-0.13.1 -- /cluster/software/Python/3.8.6-GCCcore-10.2.0/bin/python
cachedir: .pytest_cache
rootdir: /fp/homes01/u01/ec-pmhalvor/nlp/msc/fgsa, configfile: pytest.ini
collecting ... 
----------------------------- live log collection ------------------------------
2022-02-11 10:29:35 [    INFO] ---------  new run: test dataset --------- (config.py:14)
2022-02-11 10:29:35 [    INFO] ---------  new run: test --------- (config.py:14)
collected 4 items

test/test_data.py::test_data_dir PASSED                                  [ 25%]
test/test_data.py::test_dataset_shape PASSED                             [ 50%]
test/test_data.py::test_dataset_values PASSED                            [ 75%]
test/test_model.py::test_BertSimple_fit FAILED                           [100%]

=================================== FAILURES ===================================
_____________________________ test_BertSimple_fit ______________________________

    def test_BertSimple_fit():
        train_dataset = NorecOneHot(
            data_path=DATA_DIR + "train/",
            ignore_id=-1,
            proportion=0.01,
        )
    
        train_loader = DataLoader(
            dataset = train_dataset,
            batch_size = 32,
            shuffle=False,
            collate_fn=lambda batch: pad(batch)
        )
    
        model = BertSimple(
>           device=DEVICE,
            ignore_id=-1,
            num_labels=9,
            lr=1e-7,  # 0.00001
            tokenizer=train_dataset.tokenizer,
        )
E       NameError: name 'DEVICE' is not defined

test/test_model.py:28: NameError
=============================== warnings summary ===============================
config.py:19
  /fp/homes01/u01/ec-pmhalvor/nlp/msc/fgsa/code/config.py:19: SyntaxWarning: "is not" with a literal. Did you mean "!="?
    name = '-'+name if name is not '' else name

config.py:32
  /fp/homes01/u01/ec-pmhalvor/nlp/msc/fgsa/code/config.py:32: SyntaxWarning: "is not" with a literal. Did you mean "!="?
    name = '-'+name if name is not '' else name

-- Docs: https://docs.pytest.org/en/stable/warnings.html
=========================== short test summary info ============================
FAILED test/test_model.py::test_BertSimple_fit - NameError: name 'DEVICE' is ...
=================== 1 failed, 3 passed, 2 warnings in 21.02s ===================

Task and CPU usage stats:
       JobID    JobName  AllocCPUS   NTasks     MinCPU MinCPUTask     AveCPU    Elapsed ExitCode 
------------ ---------- ---------- -------- ---------- ---------- ---------- ---------- -------- 
23357              fgsa          1                                             00:00:25      1:0 
23357.batch       batch          1        1   00:00:03          0   00:00:03   00:00:25      1:0 
23357.extern     extern          1        1   00:00:00          0   00:00:00   00:00:25      0:0 

Memory usage stats:
       JobID     MaxRSS MaxRSSTask     AveRSS MaxPages   MaxPagesTask   AvePages 
------------ ---------- ---------- ---------- -------- -------------- ---------- 
23357                                                                            
23357.batch        188K          0       188K        0              0          0 
23357.extern          0          0          0        0              0          0 

Disk usage stats:
       JobID  MaxDiskRead MaxDiskReadTask    AveDiskRead MaxDiskWrite MaxDiskWriteTask   AveDiskWrite 
------------ ------------ --------------- -------------- ------------ ---------------- -------------- 
23357                                                                                                 
23357.batch             0               0              0            0                0              0 
23357.extern        0.01M               0          0.01M            0                0              0 

Job 23357 completed at Fri Feb 11 10:29:57 CET 2022
